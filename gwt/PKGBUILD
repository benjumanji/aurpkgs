# Maintainer: Guillaume ALAUX <guillaume at alaux dot net>
# Contributor: Adrian Berriel <berriel@gmail.com>
# Contributor: Tomas Urgosik <tomas.urgosik@gmail.com>
# Contributor: Lee.MaRS <leemars@gmail.com>
pkgname=gwt
pkgver=2.6.1
pkgrel=1
pkgdesc='Google Web Toolkit - core libraries and compiler to write web applications'
arch=('any')
url='https://developers.google.com/web-toolkit/'
license=('APACHE')
depends=('java-environment')
source=("http://storage.googleapis.com/${pkgname}-releases/${pkgname}-${pkgver}.zip")
sha256sums=('36d6b3884f1b2bc58a3eb1f69b3185a0b574ec4ee56f1bf307ecbacfe7201b75')

package() {
  cd "${srcdir}"
  install -d "${pkgdir}"/{opt,usr/bin}
  cp -R ${pkgname}-${pkgver} "${pkgdir}"/opt/${pkgname}
  sed -i 's/`dirname $0`/\/opt\/gwt/' "${pkgdir}"/opt/${pkgname}/webAppCreator
  ln -s /opt/gwt/webAppCreator "${pkgdir}"/usr/bin/webAppCreator
  find "${pkgdir}" -name "*.dll" -o -name "*.cmd" -delete
}
