# Contributor: Hugo Doria <hugo@archlinux.org>
# Contributor: Guillaume ALAUX <guillaume at alaux dot net>
pkgname=('tomcat' 'tomcat-admin')
pkgbase=tomcat
pkgver=5.5.30
pkgrel=1
pkgdesc="Servlet container for Java Servlet and JavaServer Pages"
arch=('i686' 'x86_64')
url="http://tomcat.apache.org/"
license=('APACHE')
depends=('java-environment')
makedepends=('openjdk6')
backup=('opt/tomcat/conf/server.xml' 'opt/tomcat/conf/tomcat-users.xml' 'etc/conf.d/tomcat')
install=tomcat.install
source=(http://archive.apache.org/dist/tomcat/tomcat-5/v${pkgver}/bin/apache-tomcat-${pkgver}.tar.gz
	'tomcat'
	'tomcat.conf.d'
)
md5sums=('661dd3fbc25249e9ceb86652eb6a4f07'
	 '20e6a8e89a148e2b0ac81ca03ceea6b1'
	 '368322d8a51ce20cc5dbdb505706a16a')

build() {
  cd "$srcdir/$pkgbase-$pkgver"
  ./configure --prefix=/usr
  make
}

package_tomcat() {
  # options and directives that can be overridden
  pkgver=
  pkgrel=
  pkgdesc=""
  arch=()
  license=()
  groups=()
  depends=()
  optdepends=()
  provides=()
  conflicts=()
  replaces=()
  backup=()
  options=()
  install=
  changelog=

  cd "$srcdir/$pkgbase-$pkgver"
  make DESTDIR="$pkgdir/" install-pkg1
}

package_tomcat-admin() {
  # options and directives overrides
  pkgdesc=""

  cd "$srcdir/$pkgbase-$pkgver"
  make DESTDIR="$pkgdir/" install-pkg2
}
